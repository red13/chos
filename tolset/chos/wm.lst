     1 00000000                                 [FORMAT "WCOFF"]
     2 00000000                                 [INSTRSET "i486p"]
     3 00000000                                 [OPTIMIZE 1]
     4 00000000                                 [OPTION 1]
     5 00000000                                 [BITS 32]
     6 00000000                                 	EXTERN	_pWindowManager
     7 00000000                                 	EXTERN	_push_debug_string
     8 00000000                                 	EXTERN	_assert
     9 00000000                                 	EXTERN	_memman_alloc_4k
    10 00000000                                 	EXTERN	_memset
    11 00000000                                 	EXTERN	_memman_free_4k
    12 00000000                                 	EXTERN	_strncpy
    13 00000000                                 	EXTERN	_sprintf
    14 00000000                                 	EXTERN	_putfonts8_asc
    15 00000000                                 	EXTERN	_putfonts8_ascbg
    16 00000000                                 [FILE "wm.c"]
    17                                          [SECTION .data]
    18 00000000                                 	ALIGNB	4
    19 00000000                                 _pWindowManager:
    20 00000000 00000000                        	DD	0
    21                                          [SECTION .text]
    22 00000000                                 	GLOBAL	_get_pixel_unit
    23 00000000                                 _get_pixel_unit:
    24 00000000 55                              	PUSH	EBP
    25 00000001 31 C0                           	XOR	EAX,EAX
    26 00000003 89 E5                           	MOV	EBP,ESP
    27 00000005 83 7D 08 01                     	CMP	DWORD [8+EBP],1
    28 00000009 0F 94 C0                        	SETE	AL
    29 0000000C 5D                              	POP	EBP
    30 0000000D 8D 44 00 FF                     	LEA	EAX,DWORD [-1+EAX+EAX*1]
    31 00000011 C3                              	RET
    32 00000012                                 	GLOBAL	_get_window
    33 00000012                                 _get_window:
    34 00000012 55                              	PUSH	EBP
    35 00000013 8B 15 [00000000]                	MOV	EDX,DWORD [_pWindowManager]
    36 00000019 89 E5                           	MOV	EBP,ESP
    37 0000001B 31 C0                           	XOR	EAX,EAX
    38 0000001D 85 D2                           	TEST	EDX,EDX
    39 0000001F 8B 4D 08                        	MOV	ECX,DWORD [8+EBP]
    40 00000022 74 14                           	JE	L6
    41 00000024 8B 02                           	MOV	EAX,DWORD [EDX]
    42 00000026 85 C0                           	TEST	EAX,EAX
    43 00000028 74 0C                           	JE	L14
    44 0000002A                                 L12:
    45 0000002A 39 48 10                        	CMP	DWORD [16+EAX],ECX
    46 0000002D 74 09                           	JE	L6
    47 0000002F 8B 40 08                        	MOV	EAX,DWORD [8+EAX]
    48 00000032 85 C0                           	TEST	EAX,EAX
    49 00000034 75 F4                           	JNE	L12
    50 00000036                                 L14:
    51 00000036 31 C0                           	XOR	EAX,EAX
    52 00000038                                 L6:
    53 00000038 5D                              	POP	EBP
    54 00000039 C3                              	RET
    55                                          [SECTION .data]
    56 00000004                                 LC0:
    57 00000004 63 72 65 5F 77 6D 28 30 29 00   	DB	"cre_wm(0)",0x00
    58 0000000E                                 LC3:
    59 0000000E 63 72 65 5F 77 6D 28 33 29 00   	DB	"cre_wm(3)",0x00
    60 00000018                                 LC2:
    61 00000018 63 72 65 5F 77 6D 28 32 29 00   	DB	"cre_wm(2)",0x00
    62 00000022                                 LC1:
    63 00000022 63 72 65 5F 77 6D 28 31 29 00   	DB	"cre_wm(1)",0x00
    64                                          [SECTION .text]
    65 0000003A                                 	GLOBAL	_create_window_manager
    66 0000003A                                 _create_window_manager:
    67 0000003A 55                              	PUSH	EBP
    68 0000003B 89 E5                           	MOV	EBP,ESP
    69 0000003D 57                              	PUSH	EDI
    70 0000003E 56                              	PUSH	ESI
    71 0000003F 53                              	PUSH	EBX
    72 00000040 51                              	PUSH	ECX
    73 00000041 51                              	PUSH	ECX
    74 00000042 83 3D [00000000] 00             	CMP	DWORD [_pWindowManager],0
    75 00000049 74 1A                           	JE	L17
    76 0000004B 68 [00000004]                   	PUSH	LC0
    77 00000050                                 L21:
    78 00000050 E8 [00000000]                   	CALL	_push_debug_string
    79 00000055 E8 [00000000]                   	CALL	_assert
    80 0000005A 83 C8 FF                        	OR	EAX,-1
    81 0000005D                                 L16:
    82 0000005D 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
    83 00000060 5B                              	POP	EBX
    84 00000061 5E                              	POP	ESI
    85 00000062 5F                              	POP	EDI
    86 00000063 5D                              	POP	EBP
    87 00000064 C3                              	RET
    88 00000065                                 L17:
    89 00000065 6A 24                           	PUSH	36
    90 00000067 FF 75 08                        	PUSH	DWORD [8+EBP]
    91 0000006A E8 [00000000]                   	CALL	_memman_alloc_4k
    92 0000006F 89 C3                           	MOV	EBX,EAX
    93 00000071 58                              	POP	EAX
    94 00000072 5A                              	POP	EDX
    95 00000073 85 DB                           	TEST	EBX,EBX
    96 00000075 0F 84 000000D1                  	JE	L22
    97 0000007B FF 75 10                        	PUSH	DWORD [16+EBP]
    98 0000007E E8 FFFFFF7D                     	CALL	_get_pixel_unit
    99 00000083 89 C6                           	MOV	ESI,EAX
   100 00000085 0F AF 75 18                     	IMUL	ESI,DWORD [24+EBP]
   101 00000089 0F AF 75 14                     	IMUL	ESI,DWORD [20+EBP]
   102 0000008D 56                              	PUSH	ESI
   103 0000008E FF 75 08                        	PUSH	DWORD [8+EBP]
   104 00000091 E8 [00000000]                   	CALL	_memman_alloc_4k
   105 00000096 83 C4 0C                        	ADD	ESP,12
   106 00000099 85 C0                           	TEST	EAX,EAX
   107 0000009B 89 45 F0                        	MOV	DWORD [-16+EBP],EAX
   108 0000009E 0F 84 00000093                  	JE	L23
   109 000000A4 56                              	PUSH	ESI
   110 000000A5 6A 01                           	PUSH	1
   111 000000A7 FF 75 F0                        	PUSH	DWORD [-16+EBP]
   112 000000AA E8 [00000000]                   	CALL	_memset
   113 000000AF 8B 45 18                        	MOV	EAX,DWORD [24+EBP]
   114 000000B2 0F AF 45 14                     	IMUL	EAX,DWORD [20+EBP]
   115 000000B6 50                              	PUSH	EAX
   116 000000B7 89 45 EC                        	MOV	DWORD [-20+EBP],EAX
   117 000000BA FF 75 08                        	PUSH	DWORD [8+EBP]
   118 000000BD E8 [00000000]                   	CALL	_memman_alloc_4k
   119 000000C2 83 C4 14                        	ADD	ESP,20
   120 000000C5 89 C2                           	MOV	EDX,EAX
   121 000000C7 85 C0                           	TEST	EAX,EAX
   122 000000C9 74 4B                           	JE	L24
   123 000000CB FC                              	CLD
   124 000000CC 31 C0                           	XOR	EAX,EAX
   125 000000CE 89 D7                           	MOV	EDI,EDX
   126 000000D0 8B 4D EC                        	MOV	ECX,DWORD [-20+EBP]
   127 000000D3 F3                              	REP
   128 000000D4 AA                              	STOSB
   129 000000D5 8B 45 08                        	MOV	EAX,DWORD [8+EBP]
   130 000000D8 8B 7D F0                        	MOV	EDI,DWORD [-16+EBP]
   131 000000DB 89 43 08                        	MOV	DWORD [8+EBX],EAX
   132 000000DE 89 7B 14                        	MOV	DWORD [20+EBX],EDI
   133 000000E1 8B 45 0C                        	MOV	EAX,DWORD [12+EBP]
   134 000000E4 8B 7D 18                        	MOV	EDI,DWORD [24+EBP]
   135 000000E7 89 43 10                        	MOV	DWORD [16+EBX],EAX
   136 000000EA C7 03 00000000                  	MOV	DWORD [EBX],0
   137 000000F0 8B 45 10                        	MOV	EAX,DWORD [16+EBP]
   138 000000F3 89 53 18                        	MOV	DWORD [24+EBX],EDX
   139 000000F6 89 43 0C                        	MOV	DWORD [12+EBX],EAX
   140 000000F9 89 7B 1C                        	MOV	DWORD [28+EBX],EDI
   141 000000FC 8B 45 14                        	MOV	EAX,DWORD [20+EBP]
   142 000000FF 89 1D [00000000]                	MOV	DWORD [_pWindowManager],EBX
   143 00000105 89 43 20                        	MOV	DWORD [32+EBX],EAX
   144 00000108 31 C0                           	XOR	EAX,EAX
   145 0000010A C7 43 04 00000000               	MOV	DWORD [4+EBX],0
   146 00000111 E9 FFFFFF47                     	JMP	L16
   147 00000116                                 L24:
   148 00000116 6A 24                           	PUSH	36
   149 00000118 53                              	PUSH	EBX
   150 00000119 FF 75 08                        	PUSH	DWORD [8+EBP]
   151 0000011C E8 [00000000]                   	CALL	_memman_free_4k
   152 00000121 56                              	PUSH	ESI
   153 00000122 FF 75 F0                        	PUSH	DWORD [-16+EBP]
   154 00000125 FF 75 08                        	PUSH	DWORD [8+EBP]
   155 00000128 E8 [00000000]                   	CALL	_memman_free_4k
   156 0000012D 68 [0000000E]                   	PUSH	LC3
   157 00000132 E9 FFFFFF19                     	JMP	L21
   158 00000137                                 L23:
   159 00000137 6A 24                           	PUSH	36
   160 00000139 53                              	PUSH	EBX
   161 0000013A FF 75 08                        	PUSH	DWORD [8+EBP]
   162 0000013D E8 [00000000]                   	CALL	_memman_free_4k
   163 00000142 68 [00000018]                   	PUSH	LC2
   164 00000147 E9 FFFFFF04                     	JMP	L21
   165 0000014C                                 L22:
   166 0000014C 68 [00000022]                   	PUSH	LC1
   167 00000151 E9 FFFFFEFA                     	JMP	L21
   168 00000156                                 	GLOBAL	_destroy_window_manager
   169 00000156                                 _destroy_window_manager:
   170 00000156 A1 [00000000]                   	MOV	EAX,DWORD [_pWindowManager]
   171 0000015B 55                              	PUSH	EBP
   172 0000015C 89 E5                           	MOV	EBP,ESP
   173 0000015E 83 38 00                        	CMP	DWORD [EAX],0
   174 00000161 75 4A                           	JNE	L29
   175 00000163                                 L31:
   176 00000163 A1 [00000000]                   	MOV	EAX,DWORD [_pWindowManager]
   177 00000168 FF 70 0C                        	PUSH	DWORD [12+EAX]
   178 0000016B E8 FFFFFE90                     	CALL	_get_pixel_unit
   179 00000170 8B 15 [00000000]                	MOV	EDX,DWORD [_pWindowManager]
   180 00000176 0F AF 42 1C                     	IMUL	EAX,DWORD [28+EDX]
   181 0000017A 0F AF 42 20                     	IMUL	EAX,DWORD [32+EDX]
   182 0000017E 89 04 24                        	MOV	DWORD [ESP],EAX
   183 00000181 FF 72 14                        	PUSH	DWORD [20+EDX]
   184 00000184 FF 72 08                        	PUSH	DWORD [8+EDX]
   185 00000187 E8 [00000000]                   	CALL	_memman_free_4k
   186 0000018C A1 [00000000]                   	MOV	EAX,DWORD [_pWindowManager]
   187 00000191 6A 24                           	PUSH	36
   188 00000193 FF 35 [00000000]                	PUSH	DWORD [_pWindowManager]
   189 00000199 FF 70 08                        	PUSH	DWORD [8+EAX]
   190 0000019C E8 [00000000]                   	CALL	_memman_free_4k
   191 000001A1 C7 05 [00000000] 00000000       	MOV	DWORD [_pWindowManager],0
   192 000001AB C9                              	LEAVE
   193 000001AC C3                              	RET
   194 000001AD                                 L29:
   195 000001AD 8B 00                           	MOV	EAX,DWORD [EAX]
   196 000001AF FF 70 10                        	PUSH	DWORD [16+EAX]
   197 000001B2 E8 00000135                     	CALL	_destroy_window
   198 000001B7 58                              	POP	EAX
   199 000001B8 A1 [00000000]                   	MOV	EAX,DWORD [_pWindowManager]
   200 000001BD 83 38 00                        	CMP	DWORD [EAX],0
   201 000001C0 75 EB                           	JNE	L29
   202 000001C2 EB 9F                           	JMP	L31
   203 000001C4                                 	GLOBAL	_create_window
   204 000001C4                                 _create_window:
   205 000001C4 55                              	PUSH	EBP
   206 000001C5 8B 15 [00000000]                	MOV	EDX,DWORD [_pWindowManager]
   207 000001CB 89 E5                           	MOV	EBP,ESP
   208 000001CD 83 C8 FF                        	OR	EAX,-1
   209 000001D0 57                              	PUSH	EDI
   210 000001D1 85 D2                           	TEST	EDX,EDX
   211 000001D3 56                              	PUSH	ESI
   212 000001D4 53                              	PUSH	EBX
   213 000001D5 0F 84 000000DB                  	JE	L32
   214 000001DB 8B 72 04                        	MOV	ESI,DWORD [4+EDX]
   215 000001DE 46                              	INC	ESI
   216 000001DF                                 L43:
   217 000001DF 8B 15 [00000000]                	MOV	EDX,DWORD [_pWindowManager]
   218 000001E5 31 FF                           	XOR	EDI,EDI
   219 000001E7 8B 02                           	MOV	EAX,DWORD [EDX]
   220 000001E9 85 C0                           	TEST	EAX,EAX
   221 000001EB 74 12                           	JE	L35
   222 000001ED                                 L41:
   223 000001ED 39 70 10                        	CMP	DWORD [16+EAX],ESI
   224 000001F0 0F 84 000000DF                  	JE	L38
   225 000001F6 89 C7                           	MOV	EDI,EAX
   226 000001F8 8B 40 08                        	MOV	EAX,DWORD [8+EAX]
   227 000001FB 85 C0                           	TEST	EAX,EAX
   228 000001FD 75 EE                           	JNE	L41
   229 000001FF                                 L35:
   230 000001FF A1 [00000000]                   	MOV	EAX,DWORD [_pWindowManager]
   231 00000204 3B 70 04                        	CMP	ESI,DWORD [4+EAX]
   232 00000207 0F 84 000000C3                  	JE	L51
   233 0000020D 89 70 04                        	MOV	DWORD [4+EAX],ESI
   234 00000210 6A 4C                           	PUSH	76
   235 00000212 FF 75 08                        	PUSH	DWORD [8+EBP]
   236 00000215 E8 [00000000]                   	CALL	_memman_alloc_4k
   237 0000021A 89 C3                           	MOV	EBX,EAX
   238 0000021C 58                              	POP	EAX
   239 0000021D 5A                              	POP	EDX
   240 0000021E 83 C8 FF                        	OR	EAX,-1
   241 00000221 85 DB                           	TEST	EBX,EBX
   242 00000223 0F 84 0000008D                  	JE	L32
   243 00000229 FF 75 0C                        	PUSH	DWORD [12+EBP]
   244 0000022C E8 FFFFFDCF                     	CALL	_get_pixel_unit
   245 00000231 0F AF 45 14                     	IMUL	EAX,DWORD [20+EBP]
   246 00000235 0F AF 45 10                     	IMUL	EAX,DWORD [16+EBP]
   247 00000239 89 04 24                        	MOV	DWORD [ESP],EAX
   248 0000023C FF 75 08                        	PUSH	DWORD [8+EBP]
   249 0000023F E8 [00000000]                   	CALL	_memman_alloc_4k
   250 00000244 5A                              	POP	EDX
   251 00000245 59                              	POP	ECX
   252 00000246 85 C0                           	TEST	EAX,EAX
   253 00000248 74 7B                           	JE	L52
   254 0000024A 89 03                           	MOV	DWORD [EBX],EAX
   255 0000024C 89 7B 04                        	MOV	DWORD [4+EBX],EDI
   256 0000024F A1 [00000000]                   	MOV	EAX,DWORD [_pWindowManager]
   257 00000254 B9 00000008                     	MOV	ECX,8
   258 00000259 89 43 0C                        	MOV	DWORD [12+EBX],EAX
   259 0000025C 8D 7B 2C                        	LEA	EDI,DWORD [44+EBX]
   260 0000025F 8B 45 0C                        	MOV	EAX,DWORD [12+EBP]
   261 00000262 89 73 10                        	MOV	DWORD [16+EBX],ESI
   262 00000265 89 43 14                        	MOV	DWORD [20+EBX],EAX
   263 00000268 8B 45 14                        	MOV	EAX,DWORD [20+EBP]
   264 0000026B 89 43 20                        	MOV	DWORD [32+EBX],EAX
   265 0000026E 8B 45 10                        	MOV	EAX,DWORD [16+EBP]
   266 00000271 89 43 24                        	MOV	DWORD [36+EBX],EAX
   267 00000274 8B 45 18                        	MOV	EAX,DWORD [24+EBP]
   268 00000277 FC                              	CLD
   269 00000278 89 43 28                        	MOV	DWORD [40+EBX],EAX
   270 0000027B 31 C0                           	XOR	EAX,EAX
   271 0000027D C7 43 08 00000000               	MOV	DWORD [8+EBX],0
   272 00000284 C7 43 18 00000000               	MOV	DWORD [24+EBX],0
   273 0000028B C7 43 1C 00000000               	MOV	DWORD [28+EBX],0
   274 00000292 F3                              	REP
   275 00000293 AB                              	STOSD
   276 00000294 6A 20                           	PUSH	32
   277 00000296 8D 43 2C                        	LEA	EAX,DWORD [44+EBX]
   278 00000299 FF 75 1C                        	PUSH	DWORD [28+EBP]
   279 0000029C 50                              	PUSH	EAX
   280 0000029D E8 [00000000]                   	CALL	_strncpy
   281 000002A2 8B 43 04                        	MOV	EAX,DWORD [4+EBX]
   282 000002A5 83 C4 0C                        	ADD	ESP,12
   283 000002A8 85 C0                           	TEST	EAX,EAX
   284 000002AA 74 12                           	JE	L47
   285 000002AC 89 58 08                        	MOV	DWORD [8+EAX],EBX
   286 000002AF                                 L48:
   287 000002AF 8B 45 20                        	MOV	EAX,DWORD [32+EBP]
   288 000002B2 89 30                           	MOV	DWORD [EAX],ESI
   289 000002B4 31 C0                           	XOR	EAX,EAX
   290 000002B6                                 L32:
   291 000002B6 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   292 000002B9 5B                              	POP	EBX
   293 000002BA 5E                              	POP	ESI
   294 000002BB 5F                              	POP	EDI
   295 000002BC 5D                              	POP	EBP
   296 000002BD C3                              	RET
   297 000002BE                                 L47:
   298 000002BE 8B 43 0C                        	MOV	EAX,DWORD [12+EBX]
   299 000002C1 89 18                           	MOV	DWORD [EAX],EBX
   300 000002C3 EB EA                           	JMP	L48
   301 000002C5                                 L52:
   302 000002C5 6A 4C                           	PUSH	76
   303 000002C7 53                              	PUSH	EBX
   304 000002C8 FF 75 08                        	PUSH	DWORD [8+EBP]
   305 000002CB E8 [00000000]                   	CALL	_memman_free_4k
   306 000002D0                                 L51:
   307 000002D0 83 C8 FF                        	OR	EAX,-1
   308 000002D3 EB E1                           	JMP	L32
   309 000002D5                                 L38:
   310 000002D5 85 C0                           	TEST	EAX,EAX
   311 000002D7 0F 84 FFFFFF22                  	JE	L35
   312 000002DD 46                              	INC	ESI
   313 000002DE 3B 72 04                        	CMP	ESI,DWORD [4+EDX]
   314 000002E1 0F 85 FFFFFEF8                  	JNE	L43
   315 000002E7 E9 FFFFFF13                     	JMP	L35
   316 000002EC                                 	GLOBAL	_destroy_window
   317 000002EC                                 _destroy_window:
   318 000002EC 55                              	PUSH	EBP
   319 000002ED 89 E5                           	MOV	EBP,ESP
   320 000002EF 53                              	PUSH	EBX
   321 000002F0 FF 75 08                        	PUSH	DWORD [8+EBP]
   322 000002F3 E8 FFFFFD1A                     	CALL	_get_window
   323 000002F8 59                              	POP	ECX
   324 000002F9 89 C3                           	MOV	EBX,EAX
   325 000002FB 85 C0                           	TEST	EAX,EAX
   326 000002FD 74 49                           	JE	L53
   327 000002FF 8B 50 04                        	MOV	EDX,DWORD [4+EAX]
   328 00000302 85 D2                           	TEST	EDX,EDX
   329 00000304 74 06                           	JE	L55
   330 00000306 8B 40 08                        	MOV	EAX,DWORD [8+EAX]
   331 00000309 89 42 08                        	MOV	DWORD [8+EDX],EAX
   332 0000030C                                 L55:
   333 0000030C 8B 43 08                        	MOV	EAX,DWORD [8+EBX]
   334 0000030F 85 C0                           	TEST	EAX,EAX
   335 00000311 74 03                           	JE	L56
   336 00000313 89 50 04                        	MOV	DWORD [4+EAX],EDX
   337 00000316                                 L56:
   338 00000316 FF 73 14                        	PUSH	DWORD [20+EBX]
   339 00000319 E8 FFFFFCE2                     	CALL	_get_pixel_unit
   340 0000031E 0F AF 43 20                     	IMUL	EAX,DWORD [32+EBX]
   341 00000322 0F AF 43 24                     	IMUL	EAX,DWORD [36+EBX]
   342 00000326 89 04 24                        	MOV	DWORD [ESP],EAX
   343 00000329 A1 [00000000]                   	MOV	EAX,DWORD [_pWindowManager]
   344 0000032E FF 33                           	PUSH	DWORD [EBX]
   345 00000330 FF 70 08                        	PUSH	DWORD [8+EAX]
   346 00000333 E8 [00000000]                   	CALL	_memman_free_4k
   347 00000338 A1 [00000000]                   	MOV	EAX,DWORD [_pWindowManager]
   348 0000033D 6A 4C                           	PUSH	76
   349 0000033F 53                              	PUSH	EBX
   350 00000340 FF 70 08                        	PUSH	DWORD [8+EAX]
   351 00000343 E8 [00000000]                   	CALL	_memman_free_4k
   352 00000348                                 L53:
   353 00000348 8B 5D FC                        	MOV	EBX,DWORD [-4+EBP]
   354 0000034B C9                              	LEAVE
   355 0000034C C3                              	RET
   356 0000034D                                 	GLOBAL	_move_window
   357 0000034D                                 _move_window:
   358 0000034D 55                              	PUSH	EBP
   359 0000034E 89 E5                           	MOV	EBP,ESP
   360 00000350 57                              	PUSH	EDI
   361 00000351 56                              	PUSH	ESI
   362 00000352 53                              	PUSH	EBX
   363 00000353 83 EC 10                        	SUB	ESP,16
   364 00000356 FF 75 08                        	PUSH	DWORD [8+EBP]
   365 00000359 8B 75 0C                        	MOV	ESI,DWORD [12+EBP]
   366 0000035C 8B 7D 10                        	MOV	EDI,DWORD [16+EBP]
   367 0000035F E8 FFFFFCAE                     	CALL	_get_window
   368 00000364 83 CA FF                        	OR	EDX,-1
   369 00000367 89 C3                           	MOV	EBX,EAX
   370 00000369 58                              	POP	EAX
   371 0000036A 85 DB                           	TEST	EBX,EBX
   372 0000036C 74 3B                           	JE	L57
   373 0000036E 8B 43 18                        	MOV	EAX,DWORD [24+EBX]
   374 00000371 89 45 EC                        	MOV	DWORD [-20+EBP],EAX
   375 00000374 8B 43 1C                        	MOV	EAX,DWORD [28+EBX]
   376 00000377 89 7D E8                        	MOV	DWORD [-24+EBP],EDI
   377 0000037A 89 45 F0                        	MOV	DWORD [-16+EBP],EAX
   378 0000037D 89 75 E4                        	MOV	DWORD [-28+EBP],ESI
   379 00000380 89 73 18                        	MOV	DWORD [24+EBX],ESI
   380 00000383 89 7B 1C                        	MOV	DWORD [28+EBX],EDI
   381 00000386 FF 73 20                        	PUSH	DWORD [32+EBX]
   382 00000389 FF 73 24                        	PUSH	DWORD [36+EBX]
   383 0000038C 8D 45 EC                        	LEA	EAX,DWORD [-20+EBP]
   384 0000038F 50                              	PUSH	EAX
   385 00000390 A1 [00000000]                   	MOV	EAX,DWORD [_pWindowManager]
   386 00000395 8B 00                           	MOV	EAX,DWORD [EAX]
   387 00000397 FF 70 10                        	PUSH	DWORD [16+EAX]
   388 0000039A E8 00000033                     	CALL	_show_window_abs
   389 0000039F 83 CA FF                        	OR	EDX,-1
   390 000003A2 83 C4 10                        	ADD	ESP,16
   391 000003A5 85 C0                           	TEST	EAX,EAX
   392 000003A7 74 0A                           	JE	L61
   393 000003A9                                 L57:
   394 000003A9 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   395 000003AC 89 D0                           	MOV	EAX,EDX
   396 000003AE 5B                              	POP	EBX
   397 000003AF 5E                              	POP	ESI
   398 000003B0 5F                              	POP	EDI
   399 000003B1 5D                              	POP	EBP
   400 000003B2 C3                              	RET
   401 000003B3                                 L61:
   402 000003B3 FF 73 20                        	PUSH	DWORD [32+EBX]
   403 000003B6 FF 73 24                        	PUSH	DWORD [36+EBX]
   404 000003B9 8D 45 E4                        	LEA	EAX,DWORD [-28+EBP]
   405 000003BC 50                              	PUSH	EAX
   406 000003BD FF 75 08                        	PUSH	DWORD [8+EBP]
   407 000003C0 E8 0000000D                     	CALL	_show_window_abs
   408 000003C5 31 D2                           	XOR	EDX,EDX
   409 000003C7 83 C4 10                        	ADD	ESP,16
   410 000003CA 85 C0                           	TEST	EAX,EAX
   411 000003CC 0F 94 C2                        	SETE	DL
   412 000003CF 4A                              	DEC	EDX
   413 000003D0 EB D7                           	JMP	L57
   414                                          [SECTION .data]
   415 0000002C                                 LC4:
   416 0000002C 77 69 6E 64 6F 77 20 69 73 20   	DB	"window is NULL",0x00
       00000036 4E 55 4C 4C 00 
   417                                          [SECTION .text]
   418 000003D2                                 	GLOBAL	_show_window_abs
   419 000003D2                                 _show_window_abs:
   420 000003D2 55                              	PUSH	EBP
   421 000003D3 89 E5                           	MOV	EBP,ESP
   422 000003D5 57                              	PUSH	EDI
   423 000003D6 56                              	PUSH	ESI
   424 000003D7 53                              	PUSH	EBX
   425 000003D8 83 EC 28                        	SUB	ESP,40
   426 000003DB 8B 75 10                        	MOV	ESI,DWORD [16+EBP]
   427 000003DE 8B 5D 0C                        	MOV	EBX,DWORD [12+EBP]
   428 000003E1 8B 7D 14                        	MOV	EDI,DWORD [20+EBP]
   429 000003E4 85 F6                           	TEST	ESI,ESI
   430 000003E6 74 04                           	JE	L94
   431 000003E8 85 FF                           	TEST	EDI,EDI
   432 000003EA 75 0A                           	JNE	L98
   433 000003EC                                 L94:
   434 000003EC 31 C0                           	XOR	EAX,EAX
   435 000003EE                                 L62:
   436 000003EE 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   437 000003F1 5B                              	POP	EBX
   438 000003F2 5E                              	POP	ESI
   439 000003F3 5F                              	POP	EDI
   440 000003F4 5D                              	POP	EBP
   441 000003F5 C3                              	RET
   442 000003F6                                 L98:
   443 000003F6 FF 75 08                        	PUSH	DWORD [8+EBP]
   444 000003F9 E8 FFFFFC14                     	CALL	_get_window
   445 000003FE 5A                              	POP	EDX
   446 000003FF 85 C0                           	TEST	EAX,EAX
   447 00000401 89 45 D0                        	MOV	DWORD [-48+EBP],EAX
   448 00000404 0F 84 0000011E                  	JE	L99
   449 0000040A 8B 03                           	MOV	EAX,DWORD [EBX]
   450 0000040C 8B 5B 04                        	MOV	EBX,DWORD [4+EBX]
   451 0000040F 89 C2                           	MOV	EDX,EAX
   452 00000411 89 45 EC                        	MOV	DWORD [-20+EBP],EAX
   453 00000414 8B 45 D0                        	MOV	EAX,DWORD [-48+EBP]
   454 00000417 01 F2                           	ADD	EDX,ESI
   455 00000419 89 5D E8                        	MOV	DWORD [-24+EBP],EBX
   456 0000041C 8B 48 0C                        	MOV	ECX,DWORD [12+EAX]
   457 0000041F 8B 41 20                        	MOV	EAX,DWORD [32+ECX]
   458 00000422 39 C2                           	CMP	EDX,EAX
   459 00000424 0F 82 000000F5                  	JB	L66
   460 0000042A 48                              	DEC	EAX
   461 0000042B 89 45 E4                        	MOV	DWORD [-28+EBP],EAX
   462 0000042E                                 L67:
   463 0000042E 8B 55 E8                        	MOV	EDX,DWORD [-24+EBP]
   464 00000431 8B 41 1C                        	MOV	EAX,DWORD [28+ECX]
   465 00000434 01 FA                           	ADD	EDX,EDI
   466 00000436 39 C2                           	CMP	EDX,EAX
   467 00000438 0F 82 000000D8                  	JB	L68
   468 0000043E 48                              	DEC	EAX
   469 0000043F 89 45 E0                        	MOV	DWORD [-32+EBP],EAX
   470 00000442                                 L69:
   471 00000442 83 7D D0 00                     	CMP	DWORD [-48+EBP],0
   472 00000446 74 A4                           	JE	L94
   473 00000448                                 L92:
   474 00000448 8B 55 D0                        	MOV	EDX,DWORD [-48+EBP]
   475 0000044B F6 42 28 02                     	TEST	BYTE [40+EDX],2
   476 0000044F 0F 85 000000AB                  	JNE	L73
   477 00000455 8B 5A 18                        	MOV	EBX,DWORD [24+EDX]
   478 00000458 89 5D DC                        	MOV	DWORD [-36+EBP],EBX
   479 0000045B 39 5D EC                        	CMP	DWORD [-20+EBP],EBX
   480 0000045E 72 06                           	JB	L75
   481 00000460 8B 4D EC                        	MOV	ECX,DWORD [-20+EBP]
   482 00000463 89 4D DC                        	MOV	DWORD [-36+EBP],ECX
   483 00000466                                 L75:
   484 00000466 8B 45 D0                        	MOV	EAX,DWORD [-48+EBP]
   485 00000469 8B 70 1C                        	MOV	ESI,DWORD [28+EAX]
   486 0000046C 89 F0                           	MOV	EAX,ESI
   487 0000046E 39 75 E8                        	CMP	DWORD [-24+EBP],ESI
   488 00000471 72 03                           	JB	L77
   489 00000473 8B 45 E8                        	MOV	EAX,DWORD [-24+EBP]
   490 00000476                                 L77:
   491 00000476 8B 55 D0                        	MOV	EDX,DWORD [-48+EBP]
   492 00000479 8B 4D E4                        	MOV	ECX,DWORD [-28+EBP]
   493 0000047C 89 4D D8                        	MOV	DWORD [-40+EBP],ECX
   494 0000047F 03 5A 24                        	ADD	EBX,DWORD [36+EDX]
   495 00000482 39 D9                           	CMP	ECX,EBX
   496 00000484 72 04                           	JB	L79
   497 00000486 4B                              	DEC	EBX
   498 00000487 89 5D D8                        	MOV	DWORD [-40+EBP],EBX
   499 0000048A                                 L79:
   500 0000048A 8B 55 D0                        	MOV	EDX,DWORD [-48+EBP]
   501 0000048D 89 F3                           	MOV	EBX,ESI
   502 0000048F 8B 4D E0                        	MOV	ECX,DWORD [-32+EBP]
   503 00000492 03 5A 20                        	ADD	EBX,DWORD [32+EDX]
   504 00000495 89 4D D4                        	MOV	DWORD [-44+EBP],ECX
   505 00000498 39 D9                           	CMP	ECX,EBX
   506 0000049A 72 04                           	JB	L81
   507 0000049C 4B                              	DEC	EBX
   508 0000049D 89 5D D4                        	MOV	DWORD [-44+EBP],EBX
   509 000004A0                                 L81:
   510 000004A0 89 C6                           	MOV	ESI,EAX
   511 000004A2 3B 45 D4                        	CMP	EAX,DWORD [-44+EBP]
   512 000004A5 77 59                           	JA	L73
   513 000004A7                                 L91:
   514 000004A7 8B 7D DC                        	MOV	EDI,DWORD [-36+EBP]
   515 000004AA 3B 7D D8                        	CMP	EDI,DWORD [-40+EBP]
   516 000004AD 77 4B                           	JA	L97
   517 000004AF                                 L90:
   518 000004AF 8B 45 D0                        	MOV	EAX,DWORD [-48+EBP]
   519 000004B2 89 FA                           	MOV	EDX,EDI
   520 000004B4 89 F1                           	MOV	ECX,ESI
   521 000004B6 2B 50 18                        	SUB	EDX,DWORD [24+EAX]
   522 000004B9 89 55 F0                        	MOV	DWORD [-16+EBP],EDX
   523 000004BC 89 F2                           	MOV	EDX,ESI
   524 000004BE 2B 50 1C                        	SUB	EDX,DWORD [28+EAX]
   525 000004C1 8B 40 0C                        	MOV	EAX,DWORD [12+EAX]
   526 000004C4 0F AF 48 20                     	IMUL	ECX,DWORD [32+EAX]
   527 000004C8 8B 58 14                        	MOV	EBX,DWORD [20+EAX]
   528 000004CB 01 F9                           	ADD	ECX,EDI
   529 000004CD 8B 45 D0                        	MOV	EAX,DWORD [-48+EBP]
   530 000004D0 0F AF 50 24                     	IMUL	EDX,DWORD [36+EAX]
   531 000004D4 03 55 F0                        	ADD	EDX,DWORD [-16+EBP]
   532 000004D7 8B 00                           	MOV	EAX,DWORD [EAX]
   533 000004D9 8A 14 02                        	MOV	DL,BYTE [EDX+EAX*1]
   534 000004DC 89 F0                           	MOV	EAX,ESI
   535 000004DE 88 14 19                        	MOV	BYTE [ECX+EBX*1],DL
   536 000004E1 8B 4D D0                        	MOV	ECX,DWORD [-48+EBP]
   537 000004E4 8B 51 0C                        	MOV	EDX,DWORD [12+ECX]
   538 000004E7 0F AF 42 20                     	IMUL	EAX,DWORD [32+EDX]
   539 000004EB 8B 52 18                        	MOV	EDX,DWORD [24+EDX]
   540 000004EE 01 F8                           	ADD	EAX,EDI
   541 000004F0 47                              	INC	EDI
   542 000004F1 C6 04 10 01                     	MOV	BYTE [EAX+EDX*1],1
   543 000004F5 3B 7D D8                        	CMP	EDI,DWORD [-40+EBP]
   544 000004F8 76 B5                           	JBE	L90
   545 000004FA                                 L97:
   546 000004FA 46                              	INC	ESI
   547 000004FB 3B 75 D4                        	CMP	ESI,DWORD [-44+EBP]
   548 000004FE 76 A7                           	JBE	L91
   549 00000500                                 L73:
   550 00000500 8B 45 D0                        	MOV	EAX,DWORD [-48+EBP]
   551 00000503 8B 40 08                        	MOV	EAX,DWORD [8+EAX]
   552 00000506 89 45 D0                        	MOV	DWORD [-48+EBP],EAX
   553 00000509 85 C0                           	TEST	EAX,EAX
   554 0000050B 0F 85 FFFFFF37                  	JNE	L92
   555 00000511 E9 FFFFFED6                     	JMP	L94
   556 00000516                                 L68:
   557 00000516 4A                              	DEC	EDX
   558 00000517 89 55 E0                        	MOV	DWORD [-32+EBP],EDX
   559 0000051A E9 FFFFFF23                     	JMP	L69
   560 0000051F                                 L66:
   561 0000051F 4A                              	DEC	EDX
   562 00000520 89 55 E4                        	MOV	DWORD [-28+EBP],EDX
   563 00000523 E9 FFFFFF06                     	JMP	L67
   564 00000528                                 L99:
   565 00000528 68 [0000002C]                   	PUSH	LC4
   566 0000052D E8 [00000000]                   	CALL	_push_debug_string
   567 00000532 83 C8 FF                        	OR	EAX,-1
   568 00000535 E9 FFFFFEB4                     	JMP	L62
   569 0000053A                                 	GLOBAL	_show_window
   570 0000053A                                 _show_window:
   571 0000053A 55                              	PUSH	EBP
   572 0000053B 89 E5                           	MOV	EBP,ESP
   573 0000053D 57                              	PUSH	EDI
   574 0000053E 56                              	PUSH	ESI
   575 0000053F 53                              	PUSH	EBX
   576 00000540 53                              	PUSH	EBX
   577 00000541 53                              	PUSH	EBX
   578 00000542 8B 7D 08                        	MOV	EDI,DWORD [8+EBP]
   579 00000545 8B 5D 0C                        	MOV	EBX,DWORD [12+EBP]
   580 00000548 57                              	PUSH	EDI
   581 00000549 8B 75 10                        	MOV	ESI,DWORD [16+EBP]
   582 0000054C E8 FFFFFAC1                     	CALL	_get_window
   583 00000551 83 CA FF                        	OR	EDX,-1
   584 00000554 59                              	POP	ECX
   585 00000555 85 C0                           	TEST	EAX,EAX
   586 00000557 74 27                           	JE	L100
   587 00000559 03 58 18                        	ADD	EBX,DWORD [24+EAX]
   588 0000055C 89 5D EC                        	MOV	DWORD [-20+EBP],EBX
   589 0000055F 03 70 1C                        	ADD	ESI,DWORD [28+EAX]
   590 00000562 8D 45 EC                        	LEA	EAX,DWORD [-20+EBP]
   591 00000565 FF 75 18                        	PUSH	DWORD [24+EBP]
   592 00000568 FF 75 14                        	PUSH	DWORD [20+EBP]
   593 0000056B 50                              	PUSH	EAX
   594 0000056C 89 75 F0                        	MOV	DWORD [-16+EBP],ESI
   595 0000056F 57                              	PUSH	EDI
   596 00000570 E8 FFFFFE5D                     	CALL	_show_window_abs
   597 00000575 31 D2                           	XOR	EDX,EDX
   598 00000577 83 C4 10                        	ADD	ESP,16
   599 0000057A 85 C0                           	TEST	EAX,EAX
   600 0000057C 0F 94 C2                        	SETE	DL
   601 0000057F 4A                              	DEC	EDX
   602 00000580                                 L100:
   603 00000580 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   604 00000583 89 D0                           	MOV	EAX,EDX
   605 00000585 5B                              	POP	EBX
   606 00000586 5E                              	POP	ESI
   607 00000587 5F                              	POP	EDI
   608 00000588 5D                              	POP	EBP
   609 00000589 C3                              	RET
   610 0000058A                                 	GLOBAL	_show_whole_window
   611 0000058A                                 _show_whole_window:
   612 0000058A 55                              	PUSH	EBP
   613 0000058B 89 E5                           	MOV	EBP,ESP
   614 0000058D 53                              	PUSH	EBX
   615 0000058E 50                              	PUSH	EAX
   616 0000058F 50                              	PUSH	EAX
   617 00000590 8B 5D 08                        	MOV	EBX,DWORD [8+EBP]
   618 00000593 53                              	PUSH	EBX
   619 00000594 E8 FFFFFA79                     	CALL	_get_window
   620 00000599 89 C2                           	MOV	EDX,EAX
   621 0000059B 58                              	POP	EAX
   622 0000059C 85 D2                           	TEST	EDX,EDX
   623 0000059E 74 26                           	JE	L104
   624 000005A0 8B 42 18                        	MOV	EAX,DWORD [24+EDX]
   625 000005A3 89 45 F4                        	MOV	DWORD [-12+EBP],EAX
   626 000005A6 8B 42 1C                        	MOV	EAX,DWORD [28+EDX]
   627 000005A9 89 45 F8                        	MOV	DWORD [-8+EBP],EAX
   628 000005AC 8D 45 F4                        	LEA	EAX,DWORD [-12+EBP]
   629 000005AF FF 72 20                        	PUSH	DWORD [32+EDX]
   630 000005B2 FF 72 24                        	PUSH	DWORD [36+EDX]
   631 000005B5 50                              	PUSH	EAX
   632 000005B6 53                              	PUSH	EBX
   633 000005B7 E8 FFFFFE16                     	CALL	_show_window_abs
   634 000005BC 83 CA FF                        	OR	EDX,-1
   635 000005BF 83 C4 10                        	ADD	ESP,16
   636 000005C2 85 C0                           	TEST	EAX,EAX
   637 000005C4 75 02                           	JNE	L103
   638 000005C6                                 L104:
   639 000005C6 31 D2                           	XOR	EDX,EDX
   640 000005C8                                 L103:
   641 000005C8 89 D0                           	MOV	EAX,EDX
   642 000005CA 8B 5D FC                        	MOV	EBX,DWORD [-4+EBP]
   643 000005CD C9                              	LEAVE
   644 000005CE C3                              	RET
   645                                          [SECTION .data]
   646 0000003B                                 LC5:
   647 0000003B 64 69 73 70 6C 61 79 5F 77 69   	DB	"display_window pWindowManager=NULL",0x00
       00000045 6E 64 6F 77 20 70 57 69 6E 64 
       0000004F 6F 77 4D 61 6E 61 67 65 72 3D 
       00000059 4E 55 4C 4C 00 
   648                                          [SECTION .text]
   649 000005CF                                 	GLOBAL	_display_window
   650 000005CF                                 _display_window:
   651 000005CF 55                              	PUSH	EBP
   652 000005D0 89 E5                           	MOV	EBP,ESP
   653 000005D2 57                              	PUSH	EDI
   654 000005D3 56                              	PUSH	ESI
   655 000005D4 53                              	PUSH	EBX
   656 000005D5 83 EC 48                        	SUB	ESP,72
   657 000005D8 A1 [00000000]                   	MOV	EAX,DWORD [_pWindowManager]
   658 000005DD 85 C0                           	TEST	EAX,EAX
   659 000005DF 74 63                           	JE	L122
   660 000005E1 8B 50 10                        	MOV	EDX,DWORD [16+EAX]
   661 000005E4 8B 58 14                        	MOV	EBX,DWORD [20+EAX]
   662 000005E7 89 55 C0                        	MOV	DWORD [-64+EBP],EDX
   663 000005EA 89 5D BC                        	MOV	DWORD [-68+EBP],EBX
   664 000005ED 8B 50 18                        	MOV	EDX,DWORD [24+EAX]
   665 000005F0 31 F6                           	XOR	ESI,ESI
   666 000005F2 8B 58 20                        	MOV	EBX,DWORD [32+EAX]
   667 000005F5 89 55 B8                        	MOV	DWORD [-72+EBP],EDX
   668 000005F8 8B 40 1C                        	MOV	EAX,DWORD [28+EAX]
   669 000005FB 89 5D AC                        	MOV	DWORD [-84+EBP],EBX
   670 000005FE 89 45 B4                        	MOV	DWORD [-76+EBP],EAX
   671 00000601 39 C6                           	CMP	ESI,EAX
   672 00000603 73 37                           	JAE	L106
   673 00000605 31 FF                           	XOR	EDI,EDI
   674 00000607                                 L118:
   675 00000607 31 C9                           	XOR	ECX,ECX
   676 00000609 3B 4D AC                        	CMP	ECX,DWORD [-84+EBP]
   677 0000060C 73 25                           	JAE	L121
   678 0000060E                                 L117:
   679 0000060E 8D 14 39                        	LEA	EDX,DWORD [ECX+EDI*1]
   680 00000611 8B 45 B8                        	MOV	EAX,DWORD [-72+EBP]
   681 00000614 80 3C 02 00                     	CMP	BYTE [EDX+EAX*1],0
   682 00000618 74 13                           	JE	L114
   683 0000061A 8B 5D BC                        	MOV	EBX,DWORD [-68+EBP]
   684 0000061D 8B 45 C0                        	MOV	EAX,DWORD [-64+EBP]
   685 00000620 8A 1C 1A                        	MOV	BL,BYTE [EDX+EBX*1]
   686 00000623 88 1C 02                        	MOV	BYTE [EDX+EAX*1],BL
   687 00000626 8B 5D B8                        	MOV	EBX,DWORD [-72+EBP]
   688 00000629 C6 04 1A 00                     	MOV	BYTE [EDX+EBX*1],0
   689 0000062D                                 L114:
   690 0000062D 41                              	INC	ECX
   691 0000062E 3B 4D AC                        	CMP	ECX,DWORD [-84+EBP]
   692 00000631 72 DB                           	JB	L117
   693 00000633                                 L121:
   694 00000633 46                              	INC	ESI
   695 00000634 03 7D AC                        	ADD	EDI,DWORD [-84+EBP]
   696 00000637 3B 75 B4                        	CMP	ESI,DWORD [-76+EBP]
   697 0000063A 72 CB                           	JB	L118
   698 0000063C                                 L106:
   699 0000063C 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   700 0000063F 5B                              	POP	EBX
   701 00000640 5E                              	POP	ESI
   702 00000641 5F                              	POP	EDI
   703 00000642 5D                              	POP	EBP
   704 00000643 C3                              	RET
   705 00000644                                 L122:
   706 00000644 68 [0000003B]                   	PUSH	LC5
   707 00000649 8D 5D C4                        	LEA	EBX,DWORD [-60+EBP]
   708 0000064C 53                              	PUSH	EBX
   709 0000064D E8 [00000000]                   	CALL	_sprintf
   710 00000652 53                              	PUSH	EBX
   711 00000653 E8 [00000000]                   	CALL	_push_debug_string
   712 00000658 EB E2                           	JMP	L106
   713                                          [SECTION .data]
   714 0000005E                                 LC6:
   715 0000005E 70 72 69 6E 74 5F 64 6F 74 20   	DB	"print_dot wnd_id is NULL",0x00
       00000068 77 6E 64 5F 69 64 20 69 73 20 
       00000072 4E 55 4C 4C 00 
   716                                          [SECTION .text]
   717 0000065A                                 	GLOBAL	_print_dot
   718 0000065A                                 _print_dot:
   719 0000065A 55                              	PUSH	EBP
   720 0000065B 89 E5                           	MOV	EBP,ESP
   721 0000065D 57                              	PUSH	EDI
   722 0000065E 56                              	PUSH	ESI
   723 0000065F 53                              	PUSH	EBX
   724 00000660 8B 7D 0C                        	MOV	EDI,DWORD [12+EBP]
   725 00000663 FF 75 08                        	PUSH	DWORD [8+EBP]
   726 00000666 8B 5D 10                        	MOV	EBX,DWORD [16+EBP]
   727 00000669 8B 75 14                        	MOV	ESI,DWORD [20+EBP]
   728 0000066C E8 FFFFF9A1                     	CALL	_get_window
   729 00000671 5A                              	POP	EDX
   730 00000672 85 C0                           	TEST	EAX,EAX
   731 00000674 74 27                           	JE	L128
   732 00000676 8B 48 24                        	MOV	ECX,DWORD [36+EAX]
   733 00000679 31 D2                           	XOR	EDX,EDX
   734 0000067B 39 CF                           	CMP	EDI,ECX
   735 0000067D 73 14                           	JAE	L123
   736 0000067F 3B 58 20                        	CMP	EBX,DWORD [32+EAX]
   737 00000682 73 0D                           	JAE	L127
   738 00000684 0F AF D9                        	IMUL	EBX,ECX
   739 00000687 8B 10                           	MOV	EDX,DWORD [EAX]
   740 00000689 89 F1                           	MOV	ECX,ESI
   741 0000068B 8D 04 1F                        	LEA	EAX,DWORD [EDI+EBX*1]
   742 0000068E 88 0C 10                        	MOV	BYTE [EAX+EDX*1],CL
   743 00000691                                 L127:
   744 00000691 31 D2                           	XOR	EDX,EDX
   745 00000693                                 L123:
   746 00000693 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   747 00000696 89 D0                           	MOV	EAX,EDX
   748 00000698 5B                              	POP	EBX
   749 00000699 5E                              	POP	ESI
   750 0000069A 5F                              	POP	EDI
   751 0000069B 5D                              	POP	EBP
   752 0000069C C3                              	RET
   753 0000069D                                 L128:
   754 0000069D 68 [0000005E]                   	PUSH	LC6
   755 000006A2 E8 [00000000]                   	CALL	_push_debug_string
   756 000006A7 83 CA FF                        	OR	EDX,-1
   757 000006AA EB E7                           	JMP	L123
   758                                          [SECTION .data]
   759 00000077                                 LC8:
   760 00000077 70 72 69 6E 74 5F 64 6F 74 20   	DB	"print_dot error",0x00
       00000081 65 72 72 6F 72 00 
   761 00000087                                 LC7:
   762 00000087 66 69 6C 6C 5F 72 65 63 74 20   	DB	"fill_rect wnd is NULL",0x00
       00000091 77 6E 64 20 69 73 20 4E 55 4C 
       0000009B 4C 00 
   763                                          [SECTION .text]
   764 000006AC                                 	GLOBAL	_fill_rect
   765 000006AC                                 _fill_rect:
   766 000006AC 55                              	PUSH	EBP
   767 000006AD 89 E5                           	MOV	EBP,ESP
   768 000006AF 57                              	PUSH	EDI
   769 000006B0 56                              	PUSH	ESI
   770 000006B1 53                              	PUSH	EBX
   771 000006B2 83 EC 34                        	SUB	ESP,52
   772 000006B5 8A 45 1C                        	MOV	AL,BYTE [28+EBP]
   773 000006B8 FF 75 08                        	PUSH	DWORD [8+EBP]
   774 000006BB 88 45 C3                        	MOV	BYTE [-61+EBP],AL
   775 000006BE E8 FFFFF94F                     	CALL	_get_window
   776 000006C3 85 C0                           	TEST	EAX,EAX
   777 000006C5 59                              	POP	ECX
   778 000006C6 74 57                           	JE	L146
   779 000006C8 8B 7D 10                        	MOV	EDI,DWORD [16+EBP]
   780 000006CB 3B 7D 18                        	CMP	EDI,DWORD [24+EBP]
   781 000006CE 77 0E                           	JA	L143
   782 000006D0                                 L141:
   783 000006D0 8B 75 0C                        	MOV	ESI,DWORD [12+EBP]
   784 000006D3 3B 75 14                        	CMP	ESI,DWORD [20+EBP]
   785 000006D6 76 10                           	JBE	L140
   786 000006D8                                 L145:
   787 000006D8 47                              	INC	EDI
   788 000006D9 3B 7D 18                        	CMP	EDI,DWORD [24+EBP]
   789 000006DC 76 F2                           	JBE	L141
   790 000006DE                                 L143:
   791 000006DE 31 C0                           	XOR	EAX,EAX
   792 000006E0                                 L129:
   793 000006E0 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   794 000006E3 5B                              	POP	EBX
   795 000006E4 5E                              	POP	ESI
   796 000006E5 5F                              	POP	EDI
   797 000006E6 5D                              	POP	EBP
   798 000006E7 C3                              	RET
   799 000006E8                                 L140:
   800 000006E8 0F B6 45 C3                     	MOVZX	EAX,BYTE [-61+EBP]
   801 000006EC 50                              	PUSH	EAX
   802 000006ED 57                              	PUSH	EDI
   803 000006EE 56                              	PUSH	ESI
   804 000006EF FF 75 08                        	PUSH	DWORD [8+EBP]
   805 000006F2 E8 FFFFFF63                     	CALL	_print_dot
   806 000006F7 83 C4 10                        	ADD	ESP,16
   807 000006FA 85 C0                           	TEST	EAX,EAX
   808 000006FC 75 08                           	JNE	L147
   809 000006FE                                 L137:
   810 000006FE 46                              	INC	ESI
   811 000006FF 3B 75 14                        	CMP	ESI,DWORD [20+EBP]
   812 00000702 76 E4                           	JBE	L140
   813 00000704 EB D2                           	JMP	L145
   814 00000706                                 L147:
   815 00000706 68 [00000077]                   	PUSH	LC8
   816 0000070B 8D 5D C4                        	LEA	EBX,DWORD [-60+EBP]
   817 0000070E 53                              	PUSH	EBX
   818 0000070F E8 [00000000]                   	CALL	_sprintf
   819 00000714 53                              	PUSH	EBX
   820 00000715 E8 [00000000]                   	CALL	_push_debug_string
   821 0000071A 83 C4 0C                        	ADD	ESP,12
   822 0000071D EB DF                           	JMP	L137
   823 0000071F                                 L146:
   824 0000071F 68 [00000087]                   	PUSH	LC7
   825 00000724 E8 [00000000]                   	CALL	_push_debug_string
   826 00000729 83 C8 FF                        	OR	EAX,-1
   827 0000072C EB B2                           	JMP	L129
   828 0000072E                                 	GLOBAL	_print_string
   829 0000072E                                 _print_string:
   830 0000072E 55                              	PUSH	EBP
   831 0000072F 89 E5                           	MOV	EBP,ESP
   832 00000731 53                              	PUSH	EBX
   833 00000732 83 3D [00000000] 00             	CMP	DWORD [_pWindowManager],0
   834 00000739 8A 5D 18                        	MOV	BL,BYTE [24+EBP]
   835 0000073C 75 07                           	JNE	L151
   836 0000073E                                 L149:
   837 0000073E 31 C0                           	XOR	EAX,EAX
   838 00000740 8B 5D FC                        	MOV	EBX,DWORD [-4+EBP]
   839 00000743 C9                              	LEAVE
   840 00000744 C3                              	RET
   841 00000745                                 L151:
   842 00000745 FF 75 08                        	PUSH	DWORD [8+EBP]
   843 00000748 E8 FFFFF8C5                     	CALL	_get_window
   844 0000074D 89 C2                           	MOV	EDX,EAX
   845 0000074F 58                              	POP	EAX
   846 00000750 85 D2                           	TEST	EDX,EDX
   847 00000752 74 EA                           	JE	L149
   848 00000754 FF 75 0C                        	PUSH	DWORD [12+EBP]
   849 00000757 0F BE C3                        	MOVSX	EAX,BL
   850 0000075A 50                              	PUSH	EAX
   851 0000075B FF 75 14                        	PUSH	DWORD [20+EBP]
   852 0000075E FF 75 10                        	PUSH	DWORD [16+EBP]
   853 00000761 FF 72 24                        	PUSH	DWORD [36+EDX]
   854 00000764 FF 32                           	PUSH	DWORD [EDX]
   855 00000766 E8 [00000000]                   	CALL	_putfonts8_asc
   856 0000076B 83 C4 18                        	ADD	ESP,24
   857 0000076E EB CE                           	JMP	L149
   858 00000770                                 	GLOBAL	_print_string_bg
   859 00000770                                 _print_string_bg:
   860 00000770 55                              	PUSH	EBP
   861 00000771 89 E5                           	MOV	EBP,ESP
   862 00000773 53                              	PUSH	EBX
   863 00000774 50                              	PUSH	EAX
   864 00000775 8A 45 18                        	MOV	AL,BYTE [24+EBP]
   865 00000778 8A 5D 1C                        	MOV	BL,BYTE [28+EBP]
   866 0000077B 88 45 FB                        	MOV	BYTE [-5+EBP],AL
   867 0000077E 83 3D [00000000] 00             	CMP	DWORD [_pWindowManager],0
   868 00000785 75 07                           	JNE	L155
   869 00000787                                 L153:
   870 00000787 31 C0                           	XOR	EAX,EAX
   871 00000789 8B 5D FC                        	MOV	EBX,DWORD [-4+EBP]
   872 0000078C C9                              	LEAVE
   873 0000078D C3                              	RET
   874 0000078E                                 L155:
   875 0000078E FF 75 08                        	PUSH	DWORD [8+EBP]
   876 00000791 E8 FFFFF87C                     	CALL	_get_window
   877 00000796 89 C2                           	MOV	EDX,EAX
   878 00000798 58                              	POP	EAX
   879 00000799 85 D2                           	TEST	EDX,EDX
   880 0000079B 74 EA                           	JE	L153
   881 0000079D FF 75 0C                        	PUSH	DWORD [12+EBP]
   882 000007A0 0F BE C3                        	MOVSX	EAX,BL
   883 000007A3 50                              	PUSH	EAX
   884 000007A4 0F BE 45 FB                     	MOVSX	EAX,BYTE [-5+EBP]
   885 000007A8 50                              	PUSH	EAX
   886 000007A9 FF 75 14                        	PUSH	DWORD [20+EBP]
   887 000007AC FF 75 10                        	PUSH	DWORD [16+EBP]
   888 000007AF FF 72 24                        	PUSH	DWORD [36+EDX]
   889 000007B2 FF 32                           	PUSH	DWORD [EDX]
   890 000007B4 E8 [00000000]                   	CALL	_putfonts8_ascbg
   891 000007B9 83 C4 1C                        	ADD	ESP,28
   892 000007BC EB C9                           	JMP	L153
   893 000007BE                                 	GLOBAL	_exchange_window_priority
   894 000007BE                                 _exchange_window_priority:
   895 000007BE 55                              	PUSH	EBP
   896 000007BF 89 E5                           	MOV	EBP,ESP
   897 000007C1 53                              	PUSH	EBX
   898 000007C2 FF 75 08                        	PUSH	DWORD [8+EBP]
   899 000007C5 E8 FFFFF848                     	CALL	_get_window
   900 000007CA 89 C3                           	MOV	EBX,EAX
   901 000007CC 58                              	POP	EAX
   902 000007CD 85 DB                           	TEST	EBX,EBX
   903 000007CF 74 4F                           	JE	L156
   904 000007D1 FF 75 0C                        	PUSH	DWORD [12+EBP]
   905 000007D4 E8 FFFFF839                     	CALL	_get_window
   906 000007D9 89 C2                           	MOV	EDX,EAX
   907 000007DB 58                              	POP	EAX
   908 000007DC 85 D2                           	TEST	EDX,EDX
   909 000007DE 74 40                           	JE	L156
   910 000007E0 8B 42 04                        	MOV	EAX,DWORD [4+EDX]
   911 000007E3 8B 4B 04                        	MOV	ECX,DWORD [4+EBX]
   912 000007E6 89 43 04                        	MOV	DWORD [4+EBX],EAX
   913 000007E9 89 4A 04                        	MOV	DWORD [4+EDX],ECX
   914 000007EC 8B 43 04                        	MOV	EAX,DWORD [4+EBX]
   915 000007EF 85 C0                           	TEST	EAX,EAX
   916 000007F1 74 03                           	JE	L159
   917 000007F3 89 58 08                        	MOV	DWORD [8+EAX],EBX
   918 000007F6                                 L159:
   919 000007F6 8B 42 04                        	MOV	EAX,DWORD [4+EDX]
   920 000007F9 85 C0                           	TEST	EAX,EAX
   921 000007FB 74 03                           	JE	L160
   922 000007FD 89 50 08                        	MOV	DWORD [8+EAX],EDX
   923 00000800                                 L160:
   924 00000800 8B 42 08                        	MOV	EAX,DWORD [8+EDX]
   925 00000803 8B 4B 08                        	MOV	ECX,DWORD [8+EBX]
   926 00000806 89 43 08                        	MOV	DWORD [8+EBX],EAX
   927 00000809 89 4A 08                        	MOV	DWORD [8+EDX],ECX
   928 0000080C 8B 43 08                        	MOV	EAX,DWORD [8+EBX]
   929 0000080F 85 C0                           	TEST	EAX,EAX
   930 00000811 74 03                           	JE	L161
   931 00000813 89 58 04                        	MOV	DWORD [4+EAX],EBX
   932 00000816                                 L161:
   933 00000816 8B 42 08                        	MOV	EAX,DWORD [8+EDX]
   934 00000819 85 C0                           	TEST	EAX,EAX
   935 0000081B 74 03                           	JE	L156
   936 0000081D 89 50 04                        	MOV	DWORD [4+EAX],EDX
   937 00000820                                 L156:
   938 00000820 8B 5D FC                        	MOV	EBX,DWORD [-4+EBP]
   939 00000823 C9                              	LEAVE
   940 00000824 C3                              	RET
   941 00000825                                 	GLOBAL	_window_force_display
   942 00000825                                 _window_force_display:
   943 00000825 55                              	PUSH	EBP
   944 00000826 89 E5                           	MOV	EBP,ESP
   945 00000828 57                              	PUSH	EDI
   946 00000829 56                              	PUSH	ESI
   947 0000082A 53                              	PUSH	EBX
   948 0000082B 52                              	PUSH	EDX
   949 0000082C FF 75 08                        	PUSH	DWORD [8+EBP]
   950 0000082F E8 FFFFF7DE                     	CALL	_get_window
   951 00000834 89 C3                           	MOV	EBX,EAX
   952 00000836 58                              	POP	EAX
   953 00000837 85 DB                           	TEST	EBX,EBX
   954 00000839 74 5D                           	JE	L163
   955 0000083B 8B 43 0C                        	MOV	EAX,DWORD [12+EBX]
   956 0000083E 31 FF                           	XOR	EDI,EDI
   957 00000840 8B 50 10                        	MOV	EDX,DWORD [16+EAX]
   958 00000843 3B 78 1C                        	CMP	EDI,DWORD [28+EAX]
   959 00000846 89 55 F0                        	MOV	DWORD [-16+EBP],EDX
   960 00000849 73 4D                           	JAE	L163
   961 0000084B 3B 7B 20                        	CMP	EDI,DWORD [32+EBX]
   962 0000084E 73 48                           	JAE	L163
   963 00000850                                 L176:
   964 00000850 31 F6                           	XOR	ESI,ESI
   965 00000852 89 C2                           	MOV	EDX,EAX
   966 00000854 3B 70 20                        	CMP	ESI,DWORD [32+EAX]
   967 00000857 73 31                           	JAE	L167
   968 00000859 8B 43 24                        	MOV	EAX,DWORD [36+EBX]
   969 0000085C 39 C6                           	CMP	ESI,EAX
   970 0000085E 73 2A                           	JAE	L167
   971 00000860                                 L175:
   972 00000860 89 F9                           	MOV	ECX,EDI
   973 00000862 0F AF 4A 20                     	IMUL	ECX,DWORD [32+EDX]
   974 00000866 0F AF C7                        	IMUL	EAX,EDI
   975 00000869 89 CA                           	MOV	EDX,ECX
   976 0000086B 01 F0                           	ADD	EAX,ESI
   977 0000086D 8B 0B                           	MOV	ECX,DWORD [EBX]
   978 0000086F 01 F2                           	ADD	EDX,ESI
   979 00000871 46                              	INC	ESI
   980 00000872 8A 04 08                        	MOV	AL,BYTE [EAX+ECX*1]
   981 00000875 8B 4D F0                        	MOV	ECX,DWORD [-16+EBP]
   982 00000878 88 04 0A                        	MOV	BYTE [EDX+ECX*1],AL
   983 0000087B 8B 53 0C                        	MOV	EDX,DWORD [12+EBX]
   984 0000087E 3B 72 20                        	CMP	ESI,DWORD [32+EDX]
   985 00000881 73 07                           	JAE	L167
   986 00000883 8B 43 24                        	MOV	EAX,DWORD [36+EBX]
   987 00000886 39 C6                           	CMP	ESI,EAX
   988 00000888 72 D6                           	JB	L175
   989 0000088A                                 L167:
   990 0000088A 8B 43 0C                        	MOV	EAX,DWORD [12+EBX]
   991 0000088D 47                              	INC	EDI
   992 0000088E 3B 78 1C                        	CMP	EDI,DWORD [28+EAX]
   993 00000891 73 05                           	JAE	L163
   994 00000893 3B 7B 20                        	CMP	EDI,DWORD [32+EBX]
   995 00000896 72 B8                           	JB	L176
   996 00000898                                 L163:
   997 00000898 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   998 0000089B 5B                              	POP	EBX
   999 0000089C 5E                              	POP	ESI
  1000 0000089D 5F                              	POP	EDI
  1001 0000089E 5D                              	POP	EBP
  1002 0000089F C3                              	RET
  1003                                          [SECTION .data]
  1004 0000009D                                 LC9:
  1005 0000009D 77 6D 3D 25 78 20 62 75 66 3D   	DB	"wm=%x buf=%x",0x00
       000000A7 25 78 00 
  1006                                          [SECTION .text]
  1007 000008A0                                 	GLOBAL	_debug_print_window_manager
  1008 000008A0                                 _debug_print_window_manager:
  1009 000008A0 55                              	PUSH	EBP
  1010 000008A1 89 E5                           	MOV	EBP,ESP
  1011 000008A3 53                              	PUSH	EBX
  1012 000008A4 83 EC 30                        	SUB	ESP,48
  1013 000008A7 A1 [00000000]                   	MOV	EAX,DWORD [_pWindowManager]
  1014 000008AC 8D 5D CC                        	LEA	EBX,DWORD [-52+EBP]
  1015 000008AF FF 70 14                        	PUSH	DWORD [20+EAX]
  1016 000008B2 50                              	PUSH	EAX
  1017 000008B3 68 [0000009D]                   	PUSH	LC9
  1018 000008B8 53                              	PUSH	EBX
  1019 000008B9 E8 [00000000]                   	CALL	_sprintf
  1020 000008BE 53                              	PUSH	EBX
  1021 000008BF E8 [00000000]                   	CALL	_push_debug_string
  1022 000008C4 8B 5D FC                        	MOV	EBX,DWORD [-4+EBP]
  1023 000008C7 C9                              	LEAVE
  1024 000008C8 C3                              	RET
  1025 000008C9                                 	GLOBAL	_set_rect
  1026 000008C9                                 _set_rect:
  1027 000008C9 55                              	PUSH	EBP
  1028 000008CA 89 E5                           	MOV	EBP,ESP
  1029 000008CC 8B 55 08                        	MOV	EDX,DWORD [8+EBP]
  1030 000008CF 8B 45 0C                        	MOV	EAX,DWORD [12+EBP]
  1031 000008D2 89 02                           	MOV	DWORD [EDX],EAX
  1032 000008D4 8B 45 10                        	MOV	EAX,DWORD [16+EBP]
  1033 000008D7 89 42 04                        	MOV	DWORD [4+EDX],EAX
  1034 000008DA 8B 45 14                        	MOV	EAX,DWORD [20+EBP]
  1035 000008DD 89 42 08                        	MOV	DWORD [8+EDX],EAX
  1036 000008E0 8B 45 18                        	MOV	EAX,DWORD [24+EBP]
  1037 000008E3 89 42 0C                        	MOV	DWORD [12+EDX],EAX
  1038 000008E6 5D                              	POP	EBP
  1039 000008E7 C3                              	RET
